(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2080"],{KOIs:function(t,e,s){},Z4dC:function(t,e,s){"use strict";var o=s("KOIs");s.n(o).a},lnhu:function(t,e,s){"use strict";s.r(e);var o=s("gDS+"),i=s.n(o),r=s("14Xm"),a=s.n(r),n=s("D3Ub"),c=s.n(n),l=s("P2sY"),u=s.n(l),d=s("uARZ"),p=s("Wj4w"),h={status:"draft",title:"default title",desc:"default description"},m={name:"ProductDetail",components:{Sticky:d.a},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this;return{form:u()({},h),loading:!1,userListOptions:[],rules:{title:[{validator:function(e,s,o){""===s?(t.$message({message:e.field+"Necessary",type:"error"}),o(new Error(e.field+"Necessary"))):o()}}]},tempRoute:{},messages:[],dialogFormVisible:!1}},computed:{sortedMessages:function(){return this.messages.sort(function(t,e){return t.timestamp>e.timestamp?-1:t.timestamp<e.timestamp?1:0})},descriptionLength:function(){return this.form.desc.length},lang:function(){return this.$store.getters.language}},created:function(){this.isEdit?(this.product_id=this.$route.params&&this.$route.params.id,this.loadLatestProduct()):this.form=u()({},h),this.tempRoute=u()({},this.$route)},methods:{setTagsViewTitle:function(){var t=(this.lang,"Edit Article"),e=u()({},this.tempRoute,{title:t+"-"+this.form.id});this.$store.dispatch("updateVisitedView",e)},submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updateProduct(t.form)})},loadLatestProduct:function(){var t=c()(a.a.mark(function t(e){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,s=localStorage.getItem("products")||"[]",this.products=JSON.parse(s),this.product=this.products.find(this.getCurrentProduct),t.next=6,Object(p.f)(this.product.seed,this.product.root);case 6:this.messages=t.sent,this.latest_product=this.sortedMessages[0],this.form=u()({},this.latest_product.data),this.loading=!1;case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getCurrentProduct:function(t){if(t.data.id==this.product_id)return t},updateProduct:function(){var t=c()(a.a.mark(function t(e){var s,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(p.a)(e,"updated",this.product.seed,this.product.next_root,this.product.start);case 3:s=t.sent,this.products.splice(this.product.data.id-1,1),s.seed=this.product.seed,s.root=this.product.root,s.stock_next_root=this.product.stock_next_root,s.stock_start=this.product.stock_start,s.stock_seed=this.product.stock_seed,s.stock_root=this.product.stock_root,this.product=s,this.products.push(this.product),o=i()(this.products),localStorage.setItem("products",o),this.loadLatestProduct(),this.$notify({title:"Sucecss",message:'Product "'+this.form.title+'" updated!',type:"success",duration:2e3}),this.form.status="published",this.loading=!1;case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),generateTitle:function(t,e){return t.data.title+", "+t.status+" at "+this.$options.filters.formatTimestampToDate(t.timestamp)},onCancel:function(){this.$router.push("/products")}}},f=(s("Z4dC"),s("KHd+")),v=Object(f.a)(m,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"createPost-container"},[s("h2",[t._v("Update Product")]),t._v(" "),s("el-form",{ref:"form",staticClass:"form-container",attrs:{model:t.form,rules:t.rules}},[s("sticky",{attrs:{"class-name":"sub-navbar "+t.form.status}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("\n        Update\n      ")]),t._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:t.onCancel}},[t._v("Cancel")])],1),t._v(" "),s("div",{staticClass:"createPost-main-container"},[s("el-row",[s("p",[t._v("ID: "+t._s(t.form.id))]),t._v(" "),s("p",[t._v("Root: "+t._s(t.product.root))]),t._v(" "),s("p",[t._v("Stock root: "+t._s(t.product.stock_root))]),t._v(" "),s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"Title:"}},[s("el-input",{staticClass:"product-text",attrs:{rows:1,type:"text",autosize:"",placeholder:"Product title"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"Description:"}},[s("el-input",{staticClass:"product-textarea",attrs:{rows:5,type:"textarea",autosize:"",placeholder:"Product description"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.descriptionLength,expression:"descriptionLength"}],staticClass:"word-counter"},[t._v(t._s(t.descriptionLength)+" Chars (1000 max)")])],1),t._v(" "),s("el-form-item",{attrs:{label:"Price"}},[s("el-col",{attrs:{span:12}},[s("el-input",{attrs:{type:"number",step:"any"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),s("el-col",{attrs:{span:5}},[s("el-select",{attrs:{placeholder:"choose currency"},model:{value:t.form.currency,callback:function(e){t.$set(t.form,"currency",e)},expression:"form.currency"}},[s("el-option",{attrs:{label:"Euro",value:"euro"}}),t._v(" "),s("el-option",{attrs:{label:"IOTA",value:"iota"}})],1)],1)],1)],1)],1),t._v(" "),s("h2",[t._v("Product History")]),t._v(" "),s("div",{staticClass:"block"},[s("el-timeline",t._l(t.sortedMessages,function(e,o){return s("el-timeline-item",{key:o,attrs:{icon:"",type:"primary",color:"#0bbd87",size:"large",timestamp:t._f("formatTimestampToDate")(e.timestamp)}},[t._v("\n        "+t._s(e.status)+" data: "+t._s(e.data)+"\n      ")])}))],1)],1)},[],!1,null,"f36857bc",null);v.options.__file="ProductDetail.vue";var _=v.exports,g=(s("S+eF"),{amount:1}),b={name:"StockList",components:{Sticky:d.a},filters:{statusFilter:function(t){return{increased:"success",created:"primary",deleted:"danger"}[t]}},props:{type:{type:String,default:"CN"}},data:function(){return{product:{data:{}},fetched_product:{},product_id:0,product_roots:[],list:[],increase_stock_form:u()({},g),loading:!1,dialogFormVisible:!1}},mounted:function(){this.product_id=this.$route.params&&this.$route.params.id,this.getStock()},methods:{getStock:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,this.loadLatestProduct(),t.next=4,Object(p.e)(this.product.stock_root,"restriced","TEST",this.appendToList,this.fetchComplete);case 4:this.$emit("create"),this.loading=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getCurrentProduct:function(t){if(t.data.id==this.product_id)return t},appendToList:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("message",e),this.list.push(e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),fetchComplete:function(){this.loading=!1,console.log("loaded stock!",this.list)},onCancel:function(){this.$router.push("/products")},onIncreaseStock:function(){this.dialogFormVisible=!0,console.log("Hello world!")},onIncreaseStockConfirmed:function(){console.log("amount: ",this.increase_stock_form.amount);var t={producer:this.increase_stock_form.producer};console.log("real product: ",t),this.publishRealProduct(t)},publishRealProduct:function(){var t=c()(a.a.mark(function t(e){var s,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(p.h)(e,this.product);case 3:s=t.sent,console.log("final response",s),this.products.pop(this.product),this.product.stock_next_root=s.next_root,this.product.stock_start=s.start,this.products.push(this.product),o=i()(this.products),localStorage.setItem("products",o),this.loadLatestProduct(),this.$notify({title:"Sucecss",message:'Product "'+this.product.title+'" updated!',type:"success",duration:2e3}),this.loading=!1,this.dialogFormVisible=!1;case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadLatestProduct:function(){var t=c()(a.a.mark(function t(e){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!0,s=localStorage.getItem("products")||"[]",this.products=JSON.parse(s),this.product=this.products.find(this.getCurrentProduct),this.loading=!1;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),fetchProcutDetails:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.e)(e,"restriced","TEST",this.appendToObject,this.fetchPructComplete);case 2:return t.abrupt("return",this.fetched_product);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),appendToObject:function(t){console.log("appendToObject")},fetchPructComplete:function(){this.loading=!1}},computed:{sortedList:function(){return this.list.sort(function(t,e){return t.timestamp>e.timestamp?-1:t.timestamp<e.timestamp?1:0})}}},k=Object(f.a)(b,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("sticky",{attrs:{"class-name":"sub-navbar"}},[s("el-button",{attrs:{type:"primary"},on:{click:t.onIncreaseStock}},[t._v("Increase Stock")]),t._v(" "),s("el-button",{attrs:{type:"warning"},on:{click:t.onCancel}},[t._v("Cancel")])],1),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sortedList,border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{"class-name":"status-col",label:"Status",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v("\n          "+t._s(e.row.status)+"\n        ")])]}}])}),t._v(" "),s("el-table-column",{attrs:{width:"220",align:"center",label:"Date"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(t._f("formatTimestampToDate")(e.row.timestamp)))])]}}])}),t._v(" "),s("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{align:"center",label:"Products","element-loading-text":"Loading..."},scopedSlots:t._u([{key:"default",fn:function(e){return[s("ul",t._l(e.row.data,function(e){return s("li",{key:e},[t._v("\n            "+t._s(e)+"\n          ")])}))]}}])})],1),t._v(" "),s("el-dialog",{attrs:{title:"Increase your stock",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("p",[t._v('You can create products of your product blueprint "'+t._s(t.product.data.title)+'"')]),t._v(" "),s("el-form",{attrs:{model:t.increase_stock_form}},[s("el-form-item",{attrs:{label:"Amount","label-width":"120px"}},[s("el-input",{attrs:{type:"number",autocomplete:"off"},model:{value:t.increase_stock_form.amount,callback:function(e){t.$set(t.increase_stock_form,"amount",e)},expression:"increase_stock_form.amount"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Producer","label-width":"120px"}},[s("el-input",{attrs:{type:"text",placeholder:"Your name"},model:{value:t.increase_stock_form.producer,callback:function(e){t.$set(t.increase_stock_form,"producer",e)},expression:"increase_stock_form.producer"}})],1)],1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("Cancel")]),t._v(" "),s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:t.onIncreaseStockConfirmed}},[t._v("Confirm")])],1)],1)],1)},[],!1,null,null,null);k.options.__file="StockList.vue";var y={name:"EditForm",components:{ProductDetail:_,StockList:k.exports},data:function(){return{tabMapOptions:[{label:"Details",key:"details"},{label:"Stock",key:"stock"}],activeName:"details"}}},w=Object(f.a)(y,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-container"},[s("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:t.tabMapOptions[0].label,name:t.tabMapOptions[0].key}},[s("keep-alive",[s("product-detail",{attrs:{"is-edit":!0}})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{label:t.tabMapOptions[1].label,name:t.tabMapOptions[1].key}},[s("keep-alive",[t.activeName==t.tabMapOptions[1].key?s("stock-list",{attrs:{type:t.tabMapOptions[1].key}}):t._e()],1)],1)],1)],1)},[],!1,null,null,null);w.options.__file="index.vue";e.default=w.exports},uARZ:function(t,e,s){"use strict";var o={name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data:function(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleReize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleReize)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},handleReset:function(){this.active&&this.reset()},reset:function(){this.position="",this.width="auto",this.active=!1,this.isSticky=!1},handleScroll:function(){var t=this.$el.getBoundingClientRect().width;this.width=t||"auto",this.$el.getBoundingClientRect().top<this.stickyTop?this.sticky():this.handleReset()},handleReize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}},i=s("KHd+"),r=Object(i.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{style:{height:t.height+"px",zIndex:t.zIndex}},[s("div",{class:t.className,style:{top:t.isSticky?t.stickyTop+"px":"",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"}},[t._t("default",[s("div",[t._v("sticky")])])],2)])},[],!1,null,null,null);r.options.__file="index.vue";e.a=r.exports}}]);